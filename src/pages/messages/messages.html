<ion-header>
	<ion-navbar>
		<ion-title>Messages</ion-title>
	</ion-navbar>
</ion-header>
<ion-content>
	<ion-list *ngIf="(messages$ | async) as messages;">
		<ion-item-sliding>
			<ion-item *ngFor="let message of messages" (click)="viewMessage(message.$key)">
				<ion-avatar *ngIf="(message.user$ | async) as receiver;" item-start>
					<img [attr.src]="(receiver.images[0].src) ? receiver.images[0].src : DEFAULT_USER_IMAGE" alt="{{receiver.firstName}}">
				</ion-avatar>
				<h2 *ngIf="(message.user$ | async) as receiver;">{{receiver.firstName}}</h2>
				<p>{{message.chats[0].message}}</p>
			</ion-item>
			<ion-item-options side="right">
				<button ion-button color="danger" (click)="deleteMessage(message.$key)">
					<ion-icon name="trash"></ion-icon> Delete
				</button>
			</ion-item-options>
		</ion-item-sliding>
	</ion-list>
</ion-content>