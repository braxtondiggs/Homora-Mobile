<ion-content>
	<div *ngIf="(favorites$ | async) as favorites; else loading">
		<ion-card *ngFor="let favorite of favorites">
			<div *ngIf="(favorite.listing$ | async) as listing" (click)="viewListing(listing.$key)">
				<div class="slide-container">
					<ion-slides pager="true">
						<ion-slide *ngFor="let image of listing.images">
							<img [attr.src]="image.src" alt="{{listing.title}}" />
						</ion-slide>
						<ion-slide *ngIf="!listing.images">
							<img [attr.src]="DEFAULT_LISTING_IMAGE" alt="Default Image" />
						</ion-slide>
					</ion-slides>
					<div class="price-container">
						<h2 class="price" color="light" ion-text>{{listing.price | currency:'USD':true:'1.0-3'}}</h2>
					</div>
					<button class="favorite" (click)="removeFavorite(favorite, $event)" ion-button icon-only clear>
						<ion-icon name="heart"></ion-icon>
					</button>
				</div>
				<ion-card-content>
					<ion-card-header class="profile" no-padding>
						<ion-avatar class="avatar" (click)="viewProfile(createdBy.$key, $event)" *ngIf="(listing.createdBy$ | async) as createdBy;">
							<img [attr.src]="(createdBy.images[0]) ? createdBy.images[0].src : DEFAULT_USER_IMAGE" alt="{{createdBy.firstName}} {{createdBy.lastName}}">
						</ion-avatar>
					</ion-card-header>
					<ion-card-title>{{listing.title}}</ion-card-title>
					<p class="sub-text">{{listing.availability | date: 'M/d'}} &#183; 1-12 Months Lease</p>
				</ion-card-content>
			</div>
		</ion-card>
	</div>
	<ng-template #loading>
		<ion-grid class="empty-favorite">
			<ion-row justify-content-center align-items-center>
				<div>
					<h1 class="md-headline">No Favorites Yet!</h1>
					<h3 class="md-subhead">Add Some Favorites</h3>
					<button (click)="nav.parent.select(0)" ion-button round>Browse Listings</button>
				</div>
			</ion-row>
		</ion-grid>
	</ng-template>
</ion-content>